(this["webpackJsonpalarm-ui"]=this["webpackJsonpalarm-ui"]||[]).push([[0],{101:function(e,t,s){},103:function(e,t,s){},104:function(e,t,s){},213:function(e,t,s){},214:function(e,t,s){},217:function(e,t,s){"use strict";s.r(t);var n=s(3),r=s(0),a=s.n(r),c=s(88),i=s.n(c),d=(s(101),s(19)),o=s(36),l=s(5),u=s(89),j=function(e){return!(!e||"object"!==typeof e)&&("string"===typeof e.deviceId&&("string"===typeof e.sensorId&&("string"===typeof e.type&&"string"===typeof e.name)))},b=function(){var e=window.localStorage.getItem("sensor-info");if(!e)return[];try{return JSON.parse(e)}catch(t){return console.log("Error parsing data",t),[]}},h=function(e){if(!Array.isArray(e)||e.length<1)return!1;var t,s=Object(u.a)(e);try{for(s.s();!(t=s.n()).done;){var n=t.value;if(!j(n))return!1}}catch(r){s.e(r)}finally{s.f()}return window.localStorage.setItem("sensor-info",JSON.stringify(e)),!0},O=s(20),v=s.n(O),p=s(21),f=s(34),x="https://actionizer.sew.ovh",m=function(e){return!!e.errorCode};function C(e){return y.apply(this,arguments)}function y(){return(y=Object(f.a)(v.a.mark((function e(t){var s,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((s=Array.isArray(t)?t:[t]).length<1)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 5:if(200!==(n=e.sent).status&&202!==n.status){e.next=8;break}return e.abrupt("return",n.json());case 8:return e.abrupt("return",{errorCode:n.status});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s(103),s(104);var N=function(e){var t=e.sensor;return Object(n.jsxs)("div",{className:"NoView",children:[t.type," - ",t.sensorId]})},g={SWITCH:function(e){var t=e.sensor,s=r.useState({payload:0,loading:!1}),a=Object(d.a)(s,2),c=a[0],i=a[1],o=r.useCallback(function(){var e=Object(f.a)(v.a.mark((function e(s){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i((function(e){return Object(p.a)(Object(p.a)({},e),{},{loading:!0})})),e.next=4,C({deviceId:t.deviceId,actions:[{sensorId:t.sensorId,type:t.type,payload:s}]});case 4:n=e.sent,i((function(e){return{payload:m(n)?-1:s,loading:!1}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i((function(e){return{payload:-1,loading:!1}}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return r.useEffect((function(){o(0)}),[o]),Object(n.jsxs)("button",{className:"ButtonSwitch","data-testid":"sew-switch-button-".concat(t.sensorId),onClick:function(){return o(0===c.payload?1:0)},disabled:c.loading,style:{backgroundColor:t.color},children:[Object(n.jsx)("div",{className:"ButtonSwitchState",children:c.loading?"Loading":1===c.payload?"ON":-1===c.payload?"??":"OFF"}),Object(n.jsx)("div",{className:"ButtonSwitchName",children:t.name})]})}},S=function(e){var t=e.sensors;return!Array.isArray(t)||t.length<1?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:"No Sensors found!"}),Object(n.jsx)("div",{children:"Add Sensors"})]}):Object(n.jsx)("div",{className:"ButtonsList",children:t.map((function(e){var t=g[e.type]?g[e.type]:N;return Object(n.jsx)(t,{sensor:e},e.sensorId)}))})},I=s(37),D=s(95),L=(s(213),["firebrick","#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB"]),A=function(e,t){return Object(p.a)(Object(p.a)({},e),t)},R={deviceId:"",sensorId:"",name:"",type:"SWITCH",color:"#DB3E00"},U=function(e){return!(!e.deviceId||e.deviceId.length<6)&&(!(!e.sensorId||e.sensorId.length<8)&&!(!e.name||e.name.length<3))},w=function(e){var t=e.addSensor,s=r.useReducer(A,R),a=Object(d.a)(s,2),c=a[0],i=a[1];return Object(n.jsxs)("div",{className:"CRUDListAdd",children:[Object(n.jsxs)("div",{className:"CRUDListAddField",children:[Object(n.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Device ID"}),Object(n.jsx)("input",{className:"CRUDListAddFieldValue",type:"text","data-testid":"sew-sensors-crud-input-deviceid",onChange:function(e){return i({deviceId:e.target.value})},value:c.deviceId})]}),Object(n.jsxs)("div",{className:"CRUDListAddField",children:[Object(n.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Sensor ID"}),Object(n.jsx)("input",{className:"CRUDListAddFieldValue",type:"text","data-testid":"sew-sensors-crud-input-sensorid",onChange:function(e){return i({sensorId:e.target.value})},value:c.sensorId})]}),Object(n.jsxs)("div",{className:"CRUDListAddField",children:[Object(n.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Sensor Name"}),Object(n.jsx)("input",{className:"CRUDListAddFieldValue",type:"text","data-testid":"sew-sensors-crud-input-name",onChange:function(e){return i({name:e.target.value})},value:c.name})]}),Object(n.jsxs)("div",{className:"CRUDListAddField",children:[Object(n.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Sensor Type"}),Object(n.jsxs)("select",{className:"CRUDListAddFieldValue","data-testid":"sew-sensors-crud-select-type",onChange:function(e){return i({type:e.target.value})},value:c.type,children:[Object(n.jsx)("option",{value:"SWITCH",children:"SWITCH"}),Object(n.jsx)("option",{value:"DCMOTOR",children:"DCMOTOR"}),Object(n.jsx)("option",{value:"DISTANCE",children:"DISTANCE"})]})]}),Object(n.jsxs)("div",{className:"CRUDListAddField",children:[Object(n.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Sensor Color"}),Object(n.jsx)(D.a,{triangle:"hide",colors:L,className:"CRUDListAddFieldValue",color:c.color,onChangeComplete:function(e){return i({color:e.hex})}})]}),Object(n.jsx)("button",{"data-testid":"sew-sensors-crud-button-save",disabled:!U(c),onClick:function(){return t(c)},className:U(c)?"CRUDListAddButton":"CRUDListAddButtonDisabled",children:"SAVE"})]})},F=function(e){var t=e.sensors,s=e.deleteSensor;return!Array.isArray(t)||t.length<1?Object(n.jsx)("div",{className:"CRUDListNoSensors",children:Object(n.jsx)("div",{children:"No Sensors found!"})}):Object(n.jsx)("div",{className:"CRUDListSensors",children:t.map((function(e,t){return Object(n.jsxs)("div",{"data-testid":"sew-sensors-crud-list-".concat(e.sensorId),className:"CRUDListSensorsItem",style:{backgroundColor:e.color},children:[Object(n.jsxs)("div",{className:"CRUDListSensorsItemLabels",children:[Object(n.jsx)("div",{children:e.name}),Object(n.jsx)("div",{children:e.deviceId}),Object(n.jsx)("div",{children:e.sensorId})]}),Object(n.jsx)("button",{"data-testid":"sew-sensors-crud-button-delete",onClick:function(){return s(t)},className:"CRUDListSensorsItemButton",children:"DELETE"})]},e.sensorId)}))})},T=function(e){var t=e.sensors,s=void 0===t?[]:t,r=e.onChange;return Object(n.jsxs)("div",{className:"CRUDList",children:[Object(n.jsx)(w,{addSensor:function(e){return r([].concat(Object(I.a)(s),[e]))}}),Object(n.jsx)(F,{sensors:s,deleteSensor:function(e){return r([].concat(Object(I.a)(s.slice(0,e)),Object(I.a)(s.slice(e+1))))}})]})};s(214);var B=function(){var e=r.useState((function(){return b()})),t=Object(d.a)(e,2),s=t[0],a=t[1],c=r.useCallback((function(e){h(e),a(e)}),[]);return Object(n.jsx)(o.a,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("div",{className:"Title",children:"Alarm UI"}),Object(n.jsx)("div",{className:"Body",children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/sensors",children:Object(n.jsx)(T,{sensors:s,onChange:c})}),Object(n.jsx)(l.a,{path:"/",children:Object(n.jsx)(S,{sensors:s})})]})}),Object(n.jsxs)("div",{className:"Sections",children:[Object(n.jsx)(o.b,{to:"/",exact:!0,className:"TabSection",activeClassName:"TabSectionSelected",children:"Buttons"}),Object(n.jsx)(o.b,{to:"/sensors",className:"TabSection",activeClassName:"TabSectionSelected",children:"Sensors"})]})]})})},k=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,219)).then((function(t){var s=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),n(e),r(e),a(e),c(e)}))};i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(B,{})}),document.getElementById("root")),k()}},[[217,1,2]]]);
//# sourceMappingURL=main.8818b391.chunk.js.map