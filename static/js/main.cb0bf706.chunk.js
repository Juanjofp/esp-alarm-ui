(this["webpackJsonpalarm-ui"]=this["webpackJsonpalarm-ui"]||[]).push([[0],{101:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),s=n.n(a),c=n(88),o=n.n(c),i=(n(101),n(11)),d=n(26),u=n(5),l=n(89),j=function(e){return!(!e||"object"!==typeof e)&&("string"===typeof e.deviceId&&("string"===typeof e.sensorId&&("string"===typeof e.type&&"string"===typeof e.name)))},b=function(){var e=window.localStorage.getItem("sensor-info");if(!e)return[];try{return JSON.parse(e)}catch(t){return console.log("Error parsing data",t),[]}},f=function(e){if(!Array.isArray(e)||e.length<1)return!1;var t,n=Object(l.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!j(r))return!1}}catch(a){n.e(a)}finally{n.f()}return window.localStorage.setItem("sensor-info",JSON.stringify(e)),!0},m=function(){var e=window.localStorage.getItem("sewcar-info");if(!e)return null;try{return JSON.parse(e)}catch(t){return console.log("Error parsing data",t),null}},h=function(e){return!!(e&&e.deviceId&&e.motorLeft&&e.motorRight)&&(window.localStorage.setItem("sewcar-info",JSON.stringify(e)),!0)},w=n(21),A=n.n(w),O=n(14),g=n(35),v="https://actionizer.sew.ovh",C=function(e){return!!e.errorCode};function p(e){return x.apply(this,arguments)}function x(){return(x=Object(g.a)(A.a.mark((function e(t){var n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=Array.isArray(t)?t:[t]).length<1)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:if(200!==(r=e.sent).status&&202!==r.status){e.next=8;break}return e.abrupt("return",r.json());case 8:return e.abrupt("return",{errorCode:r.status});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(103),n(104);var S=function(e){var t=e.sensor;return Object(r.jsxs)("div",{className:"NoView",children:[t.type," - ",t.sensorId]})},N={SWITCH:function(e){var t=e.sensor,n=a.useState({payload:0,loading:!1}),s=Object(i.a)(n,2),c=s[0],o=s[1],d=a.useCallback(function(){var e=Object(g.a)(A.a.mark((function e(n){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o((function(e){return Object(O.a)(Object(O.a)({},e),{},{loading:!0})})),e.next=4,p({deviceId:t.deviceId,actions:[{sensorId:t.sensorId,type:t.type,payload:n}]});case 4:r=e.sent,o((function(e){return{payload:C(r)?-1:n,loading:!1}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o((function(e){return{payload:-1,loading:!1}}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return a.useEffect((function(){d(0)}),[d]),Object(r.jsxs)("button",{className:"ButtonSwitch","data-testid":"sew-switch-button-".concat(t.sensorId),onClick:function(){return d(0===c.payload?1:0)},disabled:c.loading,style:{backgroundColor:t.color},children:[Object(r.jsx)("div",{className:"ButtonSwitchState",children:c.loading?"Loading":1===c.payload?"ON":-1===c.payload?"??":"OFF"}),Object(r.jsx)("div",{className:"ButtonSwitchName",children:t.name})]})}},B=function(e){var t=e.sensors;return!Array.isArray(t)||t.length<1?Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:"No Sensors found!"}),Object(r.jsx)("div",{children:"Add Sensors"})]}):Object(r.jsx)("div",{className:"ButtonsList",children:t.map((function(e){var t=N[e.type]?N[e.type]:S;return Object(r.jsx)(t,{sensor:e},e.sensorId)}))})},I=n(37),y=n(95),L=(n(213),["firebrick","#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB"]),D=function(e,t){return Object(O.a)(Object(O.a)({},e),t)},R={deviceId:"",sensorId:"",name:"",type:"SWITCH",color:"#DB3E00"},F=function(e){return!(!e.deviceId||e.deviceId.length<6)&&(!(!e.sensorId||e.sensorId.length<8)&&!(!e.name||e.name.length<3))},T=function(e){var t=e.addSensor,n=a.useReducer(D,R),s=Object(i.a)(n,2),c=s[0],o=s[1];return Object(r.jsxs)("div",{className:"CRUDListAdd",children:[Object(r.jsxs)("div",{className:"CRUDListAddField",children:[Object(r.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Device ID"}),Object(r.jsx)("input",{className:"CRUDListAddFieldValue",type:"text","data-testid":"sew-sensors-crud-input-deviceid",onChange:function(e){return o({deviceId:e.target.value})},value:c.deviceId})]}),Object(r.jsxs)("div",{className:"CRUDListAddField",children:[Object(r.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Sensor ID"}),Object(r.jsx)("input",{className:"CRUDListAddFieldValue",type:"text","data-testid":"sew-sensors-crud-input-sensorid",onChange:function(e){return o({sensorId:e.target.value})},value:c.sensorId})]}),Object(r.jsxs)("div",{className:"CRUDListAddField",children:[Object(r.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Sensor Name"}),Object(r.jsx)("input",{className:"CRUDListAddFieldValue",type:"text","data-testid":"sew-sensors-crud-input-name",onChange:function(e){return o({name:e.target.value})},value:c.name})]}),Object(r.jsxs)("div",{className:"CRUDListAddField",children:[Object(r.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Sensor Type"}),Object(r.jsxs)("select",{className:"CRUDListAddFieldValue","data-testid":"sew-sensors-crud-select-type",onChange:function(e){return o({type:e.target.value})},value:c.type,children:[Object(r.jsx)("option",{value:"SWITCH",children:"SWITCH"}),Object(r.jsx)("option",{value:"DCMOTOR",children:"DCMOTOR"}),Object(r.jsx)("option",{value:"DISTANCE",children:"DISTANCE"})]})]}),Object(r.jsxs)("div",{className:"CRUDListAddField",children:[Object(r.jsx)("span",{className:"CRUDListAddFieldLabel",children:"Sensor Color"}),Object(r.jsx)(y.a,{triangle:"hide",colors:L,className:"CRUDListAddFieldValue",color:c.color,onChangeComplete:function(e){return o({color:e.hex})}})]}),Object(r.jsx)("button",{"data-testid":"sew-sensors-crud-button-save",disabled:!F(c),onClick:function(){return t(c)},className:F(c)?"CRUDListAddButton":"CRUDListAddButtonDisabled",children:"SAVE"})]})},k=function(e){var t=e.sensors,n=e.deleteSensor;return!Array.isArray(t)||t.length<1?Object(r.jsx)("div",{className:"CRUDListNoSensors",children:Object(r.jsx)("div",{children:"No Sensors found!"})}):Object(r.jsx)("div",{className:"CRUDListSensors",children:t.map((function(e,t){return Object(r.jsxs)("div",{"data-testid":"sew-sensors-crud-list-".concat(e.sensorId),className:"CRUDListSensorsItem",style:{backgroundColor:e.color},children:[Object(r.jsxs)("div",{className:"CRUDListSensorsItemLabels",children:[Object(r.jsx)("div",{children:e.name}),Object(r.jsx)("div",{children:e.deviceId}),Object(r.jsx)("div",{children:e.sensorId})]}),Object(r.jsx)("button",{"data-testid":"sew-sensors-crud-button-delete",onClick:function(){return n(t)},className:"CRUDListSensorsItemButton",children:"DELETE"})]},e.sensorId)}))})},M=function(e){var t=e.sensors,n=void 0===t?[]:t,a=e.onChange;return Object(r.jsxs)("div",{className:"CRUDList",children:[Object(r.jsx)(T,{addSensor:function(e){return a([].concat(Object(I.a)(n),[e]))}}),Object(r.jsx)(k,{sensors:n,deleteSensor:function(e){return a([].concat(Object(I.a)(n.slice(0,e)),Object(I.a)(n.slice(e+1))))}})]})},E=function(e,t,n,r){return{sensorId:e,type:"DCMOTOR",payload:{enabled:t,reverse:n,power:r}}},U=function(e,t){return{deviceId:e,actions:t}},V=(n(214),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAADs0lEQVR4Xu2aT8iOWRjGfx8zKRaYwgJRs1AiKSWNWFnIQk2JsphJFBvNAgulKLNQJgsLG6VkQRELCwuLkZKQJFOaBVL+FFNIkf/depXR5/P+uc+5nifX2Xybc+7r3Nfvvd7vPed5hvCQOjAkVbc4BiD+EBiAAYgdEMs7AQYgdkAs7wQYgNgBsbwTYABiB8TyToABiB0QyzsBBiB2QCzvBBiA2AGxvBNgAGIHxPJOgAGIHRDLOwEGIHZALO8EGIDYAbG8E2AAYgfE8k6AAYgdEMs7AQbQlwNzgBPAz53Vd4A1wJW+qgkXtTEBfwD7vuLZDmC30M+epdsGYAVw+htdRhKO9eyEaEGbAMwCbnbp03zgWpdzpdPaAmAC8B8wqku33gNTgEddzpdNawOAH4AnwLgeXXoJjAde9biu6vSmA4j93QZm9OnKA2AqEIlo5Gg6gHPAkgGduwQsHLBGseVNBnAA2JjU+WHgt6RaqWWaCiCMDwCZYwvwV2bBjFpNBLAU+DujuWFqLAfOFKrdV9mmAZjZ+afbVzNdLorzxL9dzi0+rUkA4mdm/NyMn50lx1vgJ+BZSZFuazcFQByw4qAVB64a43lHK2BIR1MAxBVDfDXUHLc+u02tqfs/rSYAiMu1uGRTjLPAMoXwJ001gD3ANqUBwH5gs2oPSgBrgSOqxr/Q3QAcVOxFBWABcFnR8AiavwAXau9JASCuieOSTKE9kr9xYTcduFcTQm0TxgBPgfjbxPG6c4X9otbmagIIrYfA5FrN9akT55HY47s+1/e0rCaAq0A8KmzDuAHMrbHRWgCOAqtrNJSocRL4NbHesKVqANgO/Fm6kUL1dwE7C9X+WLY0gJXAqZINVKi9CjheSqckgNnAP6U2XrnuPOB6Cc1SACYCj3t4jaREb5k144wwqXNjm1m3yFfQj517/bGpO9UXi7NBXJenvuaSnYCodxeYpveryA7ud3pLe80lG8B5YHGR1ptT9CKwKGs7mQDijeV4c/l7GHuBrRmNZgKIe5TSz3Mzes6o8QaI/3UDj0wAsanRA++oHQXiWXLKhy0TwCHg93b4N/Auo9d1A1cpcBKOt9nWZ306MhpMrhEpjydnm7LqZiYga0/fVR0DEOM2AAMQOyCWdwIMQOyAWN4JMACxA2J5J8AAxA6I5Z0AAxA7IJZ3AgxA7IBY3gkwALEDYnknwADEDojlnQADEDsglncCDEDsgFjeCTAAsQNieSfAAMQOiOWdAAMQOyCWdwIMQOyAWP4DbdtVYR6BwQ4AAAAASUVORK5CYII="),Q=function(e,t){return Object(O.a)(Object(O.a)({},e),t)},J={deviceId:"",motorLeft:"",motorRight:""},Y=function(e){return!(!e.deviceId||e.deviceId.length<6)&&(!(!e.motorLeft||e.motorLeft.length<8)&&!(!e.motorRight||e.motorRight.length<8))},G=function(e){var t=e.setSewCar,n=a.useReducer(Q,J),s=Object(i.a)(n,2),c=s[0],o=s[1],d=a.useCallback((function(e){h(e),t(e)}),[t]);return Object(r.jsxs)("div",{className:"SewCarContainer","data-testid":"sewcar-form-container",children:[Object(r.jsxs)("div",{className:"SewCarAddField",children:[Object(r.jsx)("span",{className:"SewCarAddFieldLabel",children:"Device Id"}),Object(r.jsx)("input",{className:"SewCarAddFieldValue",type:"text","data-testid":"sewcar-form-input-deviceid",onChange:function(e){return o({deviceId:e.target.value})},value:c.deviceId})]}),Object(r.jsxs)("div",{className:"SewCarAddField",children:[Object(r.jsx)("span",{className:"SewCarAddFieldLabel",children:"Motor Left Id"}),Object(r.jsx)("input",{className:"SewCarAddFieldValue",type:"text","data-testid":"sewcar-form-input-motor-left",onChange:function(e){return o({motorLeft:e.target.value})},value:c.motorLeft})]}),Object(r.jsxs)("div",{className:"SewCarAddField",children:[Object(r.jsx)("span",{className:"SewCarAddFieldLabel",children:"Motor Right Id"}),Object(r.jsx)("input",{className:"SewCarAddFieldValue",type:"text","data-testid":"sewcar-form-input-motor-right",onChange:function(e){return o({motorRight:e.target.value})},value:c.motorRight})]}),Object(r.jsx)("button",{"data-testid":"sewcar-form-button-save",disabled:!Y(c),onClick:function(){return d(c)},className:Y(c)?"SewCarAddButton":"SewCarAddButtonDisabled",children:"SAVE"})]})},H=function(e){var t=e.sewCar,n=a.useMemo((function(){return function(e){return{stop:function(){p(U(e.deviceId,[E(e.motorLeft,!1,!1,0),E(e.motorRight,!1,!1,0)]))},forward:function(t){p(U(e.deviceId,[E(e.motorLeft,!0,!1,t),E(e.motorRight,!0,!1,t)]))},backward:function(t){p(U(e.deviceId,[E(e.motorLeft,!0,!0,t),E(e.motorRight,!0,!0,t)]))},left:function(t){p(U(e.deviceId,[E(e.motorLeft,!0,!1,0),E(e.motorRight,!0,!1,t)]))},right:function(t){p(U(e.deviceId,[E(e.motorLeft,!0,!1,t),E(e.motorRight,!0,!1,0)]))},leftForward:function(t){p(U(e.deviceId,[E(e.motorLeft,!0,!1,Math.round(2*t/3)),E(e.motorRight,!0,!1,t)]))},rightForward:function(t){p(U(e.deviceId,[E(e.motorLeft,!0,!1,t),E(e.motorRight,!0,!1,Math.round(2*t/3))]))},leftBackward:function(t){p(U(e.deviceId,[E(e.motorLeft,!0,!0,Math.round(2*t/3)),E(e.motorRight,!0,!0,t)]))},rightBackward:function(t){p(U(e.deviceId,[E(e.motorLeft,!0,!0,t),E(e.motorRight,!0,!0,Math.round(2*t/3))]))}}}(t)}),[t]),s=n.stop,c=n.forward,o=n.backward,d=n.left,u=n.right,l=n.leftForward,j=n.rightForward,b=n.leftBackward,f=n.rightBackward,m=a.useState(200),h=Object(i.a)(m,2),w=h[0],A=h[1],O=a.useState("np"),g=Object(i.a)(O,2),v=g[0],C=g[1];return Object(r.jsxs)("div",{className:"SewCarContainer","data-testid":"sewcar-pad-container",children:[Object(r.jsx)("div",{className:"SewCarTitle",children:"SewCar GamePad"}),Object(r.jsxs)("div",{className:"SewCarPad",onContextMenu:function(e){e.preventDefault()},onMouseUp:function(){s(),C("np")},onTouchEnd:function(){s(),C("np")},children:[Object(r.jsxs)("div",{className:"SewCarButtonsRow",children:[Object(r.jsx)("div",{"data-testid":"sewcar-pad-button-upleft",className:"ul"===v?"SewCarActiveButton":"SewCarButton",onMouseDown:function(){l(w),C("ul")},onTouchStart:function(){l(w),C("ul")},children:Object(r.jsx)("img",{src:V,alt:"forward",style:{transform:"rotate(-45deg)"}})}),Object(r.jsx)("div",{"data-testid":"sewcar-pad-button-up",className:"up"===v?"SewCarActiveButton":"SewCarButton",onMouseDown:function(){c(w),C("up")},onTouchStart:function(){c(w),C("up")},children:Object(r.jsx)("img",{src:V,alt:"forward"})}),Object(r.jsx)("div",{"data-testid":"sewcar-pad-button-upright",className:"ur"===v?"SewCarActiveButton":"SewCarButton",onMouseDown:function(){j(w),C("ur")},onTouchStart:function(){j(w),C("ur")},children:Object(r.jsx)("img",{src:V,alt:"forward",style:{transform:"rotate(45deg)"}})})]}),Object(r.jsxs)("div",{className:"SewCarButtonsRow",children:[Object(r.jsx)("div",{"data-testid":"sewcar-pad-button-left",className:"lf"===v?"SewCarActiveButton":"SewCarButton",onMouseDown:function(){d(w),C("lf")},onTouchStart:function(){d(w),C("lf")},children:Object(r.jsx)("img",{src:V,alt:"forward",style:{transform:"rotate(-90deg)"}})}),Object(r.jsx)("div",{className:"SewCarPowerValue",children:w}),Object(r.jsx)("div",{"data-testid":"sewcar-pad-button-right",className:"rg"===v?"SewCarActiveButton":"SewCarButton",onMouseDown:function(){u(w),C("rg")},onTouchStart:function(){u(w),C("rg")},children:Object(r.jsx)("img",{src:V,alt:"forward",style:{transform:"rotate(90deg)"}})})]}),Object(r.jsxs)("div",{className:"SewCarButtonsRow",children:[Object(r.jsx)("div",{"data-testid":"sewcar-pad-button-downleft",className:"dl"===v?"SewCarActiveButton":"SewCarButton",onMouseDown:function(){b(w),C("dl")},onTouchStart:function(){b(w),C("dl")},children:Object(r.jsx)("img",{src:V,alt:"forward",style:{transform:"rotate(-135deg)"}})}),Object(r.jsx)("div",{"data-testid":"sewcar-pad-button-down",className:"dw"===v?"SewCarActiveButton":"SewCarButton",onMouseDown:function(){o(w),C("dw")},onTouchStart:function(){o(w),C("dw")},children:Object(r.jsx)("img",{src:V,alt:"forward",style:{transform:"rotate(180deg)"}})}),Object(r.jsx)("div",{"data-testid":"sewcar-pad-button-downright",className:"dr"===v?"SewCarActiveButton":"SewCarButton",onMouseDown:function(){f(w),C("dr")},onTouchStart:function(){f(w),C("dr")},children:Object(r.jsx)("img",{src:V,alt:"forward",style:{transform:"rotate(135deg)"}})})]})]}),Object(r.jsx)("div",{className:"SewCarPower",children:Object(r.jsx)("input",{style:{width:"100%"},type:"range",min:0,max:255,step:1,value:w,onChange:function(e){return A(e.target.valueAsNumber)},"data-testid":"sewcar-pad-input-power"})})]})},W=function(){var e=a.useState((function(){return m()})),t=Object(i.a)(e,2),n=t[0],s=t[1];return n?Object(r.jsx)(H,{sewCar:n}):Object(r.jsx)(G,{setSewCar:s})};n(215);var P=function(){var e=a.useState((function(){return b()})),t=Object(i.a)(e,2),n=t[0],s=t[1],c=a.useCallback((function(e){f(e),s(e)}),[]);return Object(r.jsx)(d.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("div",{className:"Title",children:"Alarm UI"}),Object(r.jsx)("div",{className:"Body",children:Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{path:"/sewcar",children:Object(r.jsx)(W,{})}),Object(r.jsx)(u.a,{path:"/sensors",children:Object(r.jsx)(M,{sensors:n,onChange:c})}),Object(r.jsx)(u.a,{path:"/",children:Object(r.jsx)(B,{sensors:n})})]})}),Object(r.jsxs)("div",{className:"Sections",children:[Object(r.jsx)(d.b,{to:"/",exact:!0,className:"TabSection",activeClassName:"TabSectionSelected",children:"Buttons"}),Object(r.jsx)(d.b,{to:"/sensors",className:"TabSection",activeClassName:"TabSectionSelected",children:"Sensors"}),Object(r.jsx)(d.b,{to:"/sewcar",className:"TabSection",activeClassName:"TabSectionSelected",children:"SewCar"})]})]})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,220)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(P,{})}),document.getElementById("root")),K()}},[[218,1,2]]]);
//# sourceMappingURL=main.cb0bf706.chunk.js.map